--- CMakeLists.txt.orig	2016-06-04 21:18:20.000000000 +0200
+++ CMakeLists.txt	2016-12-25 14:48:17.749992535 +0100
@@ -373,11 +373,20 @@
 ENDIF(AUDIO_CAPTCHA)
 
 IF(FROST_SUPPORT OR FCP_SSL_SUPPORT)
-	ADD_SUBDIRECTORY(libs/mbedtls)
-	TARGET_LINK_LIBRARIES(fms mbedtls)
-	TARGET_LINK_LIBRARIES(fms mbedcrypto)
-	TARGET_LINK_LIBRARIES(fms mbedx509)
-	INCLUDE_DIRECTORIES(libs/mbedtls/include)
+	FIND_LIBRARY(MBEDTLS_LIBRARY NAMES mbedtls libmbedtls)
+	FIND_LIBRARY(MBEDCRYPTO_LIBRARY NAMES mbedcrypto libmbedcrypto)
+	FIND_LIBRARY(MBEDX509_LIBRARY NAMES mbedx509 libmbedx509)
+	IF(MBEDTLS_LIBRARY AND MBEDCRYPTO_LIBRARY AND MBEDX509_LIBRARY)
+		TARGET_LINK_LIBRARIES(fms ${MBEDTLS_LIBRARY})
+		TARGET_LINK_LIBRARIES(fms ${MBEDCRYPTO_LIBRARY})
+		TARGET_LINK_LIBRARIES(fms ${MBEDX509_LIBRARY})
+	ELSE(MBEDTLS_LIBRARY AND MBEDCRYPTO_LIBRARY AND MBEDX509_LIBRARY)
+		ADD_SUBDIRECTORY(libs/mbedtls)
+		TARGET_LINK_LIBRARIES(fms mbedtls)
+		TARGET_LINK_LIBRARIES(fms mbedcrypto)
+		TARGET_LINK_LIBRARIES(fms mbedx509)
+		INCLUDE_DIRECTORIES(libs/mbedtls/include)
+	ENDIF(MBEDTLS_LIBRARY AND MBEDCRYPTO_LIBRARY AND MBEDX509_LIBRARY)
 
 	IF(FROST_SUPPORT)
 		ADD_DEFINITIONS(-DFROST_SUPPORT)
